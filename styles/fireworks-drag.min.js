function Particle(b,c,a){this.init(b,c,a)}Particle.prototype={init:function(b,c,a){this.alive=true;this.radius=a||10;this.wander=0.15;this.theta=random(TWO_PI);this.drag=0.92;this.color="#fff";this.x=b||0;this.y=c||0;this.vx=0;this.vy=0},move:function(){this.x+=this.vx;this.y+=this.vy;this.vx*=this.drag;this.vy*=this.drag;this.theta+=random(-0.5,0.5)*this.wander;this.vx+=sin(this.theta)*0.1;this.vy+=cos(this.theta)*0.1;this.radius*=0.96;this.alive=this.radius>0.5},draw:function(a){a.beginPath();a.arc(this.x,this.y,this.radius,0,TWO_PI);a.fillStyle=this.color;a.fill()}};let MAX_PARTICLES=280;let COLOURS=["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FF4E50","#F9D423"];let particles=[];let pool=[];let demo=Sketch.create({container:document.getElementById("fireworks")});demo.spawn=function(a,b){if(particles.length>=MAX_PARTICLES){pool.push(particles.shift())}particle=pool.length?pool.pop():new Particle();particle.init(a,b,random(5,40));particle.wander=random(0.5,2);particle.color=random(COLOURS);particle.drag=random(0.9,0.99);theta=random(TWO_PI);force=random(2,8);particle.vx=sin(theta)*force;particle.vy=cos(theta)*force;particles.push(particle)};demo.update=function(){let i,particle;for(i=particles.length-1;i>=0;i--){particle=particles[i];if(particle.alive){particle.move()}else{pool.push(particles.splice(i,1)[0])}}};demo.draw=function(){demo.globalCompositeOperation="lighter";for(let i=particles.length-1;i>=0;i--){particles[i].draw(demo)}};demo.mousemove=function(){let touch,max,i,j,n;for(i=0,n=demo.touches.length;i<n;i++){touch=demo.touches[i],max=random(1,4);for(j=0;j<max;j++){demo.spawn(touch.x,touch.y)}}};
